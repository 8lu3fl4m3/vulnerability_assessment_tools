import socket
import sys
from datetime import datetime

targetDomain = input("Enter a remote host to scan(e.g. abc.com): ")
targetIP = socket.gethostbyname(targetDomain)

print("\nPlease wait, scanning remote host", targetIP, '\n')

start_time = datetime.now()

try:
    for port in range(1, 1000):
        sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        result = sock.connect_ex((targetIP, port))
        if result == 0:
            print("Port {}: 	 Open".format(port))
        sock.close()

except KeyboardInterrupt:
    print("Keyboard interruption detected. You pressed Ctrl+C. Exiting..!")
    sys.exit()

except socket.gaierror:
    print('Hostname could not be resolved. Exiting..!')
    sys.exit()

except socket.error:
    print("Couldn't connect to the remote server. Exiting..!")
    sys.exit()

end_time = datetime.now()

scan_time = end_time - start_time


print('\n\nPort Scanning completed in: ', scan_time)
